webpackJsonp([1],{"/Wyd":function(t,e){},"4/hK":function(t,e){},"8iAR":function(t,e){},"9ozf":function(t,e){},BhM5:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.isRouterAlice?e("router-view"):this._e()],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlice:!0}},methods:{reload:function(){this.isRouterAlice=!1,this.$nextTick(function(){this.isRouterAlice=!0})}}},o,!1,function(t){a("8iAR")},null,null).exports,s=a("/ocq"),i={name:"Dashboard",data:function(){return{imgSrc:a("ONMz")}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",[e("img",{attrs:{src:this.imgSrc,width:"100%",height:"100%",alt:""}})])])},staticRenderFns:[]};var u={name:"Home",components:{DashBoard:a("VU/8")(i,r,!1,function(t){a("/Wyd")},"data-v-32f785f0",null).exports},data:function(){return{activeIndex:"/"==this.$router.currentRoute.path?"/home":this.$router.currentRoute.path,consoleVersion:""}},mounted:function(){var t=this;this.getRequest("/mydataharbor/dashboard/version").then(function(e){t.consoleVersion=e["console-version"]})},computed:{},methods:{}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",{staticStyle:{padding:"0 5%"}},[a("el-header",[a("el-menu",{attrs:{mode:"horizontal",router:"","unique-opened":"","default-active":t.activeIndex}},[a("el-menu-item",{attrs:{index:"/home"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/cluster"}},[a("i",{staticClass:"el-icon-s-help"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("集群管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/plugin"}},[a("i",{staticClass:"el-icon-s-data"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("插件仓库")])])],1)],1),t._v(" "),a("el-container",{staticStyle:{height:"100%"}},[a("el-main",["/home"==this.$router.currentRoute.path||"/"==this.$router.currentRoute.path?a("DashBoard"):t._e(),t._v(" "),a("router-view",{staticClass:"homeRouterView"})],1)],1),t._v(" "),a("el-footer",[a("el-link",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},attrs:{href:"https://www.mydataharbor.com"}},[t._v("   官方网站   ")]),t._v(" "),a("el-link",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},attrs:{href:"/swagger-ui/#/"}},[t._v("   swagger api文档   ")]),t._v(" "),a("p",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v("    MyDataHarbor控制台版本："+t._s(t.consoleVersion)+"    ")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,c,!1,function(t){a("BhM5")},"data-v-270e3ec8",null).exports,p=a("mvHQ"),m=a.n(p),f={name:"Node",props:["nodeList"],data:function(){return{nodes:this.nodeList,pageNo:1,pageSize:10,pageTotal:0}},mounted:function(){this.init()},methods:{init:function(){},handlePageChange:function(){},formatDuring:function(t){t=(new Date).getTime()-t;var e=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),l=Math.floor(t%36e5/6e4);return e>0?e+"天"+a+"小时"+l+"分钟":a+"小时"+l+"分钟"}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.nodes,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"nodeName",label:"节点名",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP"}}),t._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hostName",label:"hostName"}}),t._v(" "),a("el-table-column",{attrs:{label:"运行时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatDuring(e.row.startTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数"}}),t._v(" "),a("el-table-column",{attrs:{label:"leader"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.leader?a("el-tag",{attrs:{type:"success"}},[t._v("true")]):a("el-tag",[t._v("false")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"javaVersion",label:"javaVersion"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"version"}}),t._v(" "),a("el-table-column",{attrs:{prop:"osName",label:"osName"}}),t._v(" "),a("el-table-column",{attrs:{prop:"osArch",label:"osArch"}})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":t.pageNo,"page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.pageTotal},on:{"current-change":t.handlePageChange}})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,g,!1,function(t){a("yJxx")},"data-v-e9165258",null).exports,v={name:"Plugins",props:["groupName"],data:function(){return{plugins:[],pageNo:1,pageSize:10,pageTotal:0,dialogFormVisible:!1,form:{groupName:this.groupName,pluginId:"",version:"",sync:!1},pluginInstallList:[],pluginInfoMap:{},rules:{pluginId:[{required:!0,message:"插件ID不能为空",trigger:"blur"}],version:[{required:!0,message:"版本不能为空",trigger:"blur"}]},allPlugins:[],allVersion:[]}},watch:{"form.pluginId":function(t){var e=this;this.form.version="",this.allPlugins.forEach(function(a){a.plugins.forEach(function(a){a.pluginId==t&&(e.allVersion=a.repoPlugins)})})}},mounted:function(){this.initData(),this.initPlugins()},methods:{clearData:function(){this.form={groupName:this.groupName,pluginId:"",version:"",sync:!1}},initData:function(){var t=this;this.getRequest("mydataharbor/plugin/listPlugins").then(function(e){t.allPlugins=e.data["本地存储库"],console.log(t.allPlugins)})},initPlugins:function(){var t=this;this.getRequest("mydataharbor/node/groupList").then(function(e){t.plugins=e.data[t.groupName].installedPlugins,console.log(t.plugins)})},unInstallPlugin:function(t){var e=this;console.log("uninstall"+t),this.postRequest("/mydataharbor/node/uninstallPlugin?groupName="+this.groupName+"&pluginId="+t).then(function(t){0==t.code&&(e.$message.info("插件卸载成功！"),e.initPlugins())})},submit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;var a="mydataharbor/node/installPlugin?groupName="+t.form.groupName+"&pluginId="+t.form.pluginId+"&version="+t.form.version+"&sync="+t.form.sync;t.postRequest(a).then(function(e){0==e.code?(t.$message.info("插件安装成功！"),t.initPlugins()):t.$message.error(e.msg)}),t.dialogFormVisible=!1,t.clearData()})},cancel:function(){this.dialogFormVisible=!1,this.clearData()},handlePageChange:function(){}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("安装插件")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.plugins,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"300",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginDescription",label:"描述",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"依赖",width:"380"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.dependencies,function(e){return a("p",[t._v("【插件id:"+t._s(e.pluginId)+",版本:"+t._s(e.pluginVersionSupport)+",可选："+t._s(e.optional)+"】")])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"provider",label:"提供者",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-close"},on:{click:function(a){return t.unInstallPlugin(e.row.pluginId)}}},[t._v("卸载")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"插件安装",visible:t.dialogFormVisible,width:"25%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left"}},[a("el-form-item",{attrs:{label:"组名",hidden:""}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"插件ID",prop:"pluginId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择插件id"},model:{value:t.form.pluginId,callback:function(e){t.$set(t.form,"pluginId",e)},expression:"form.pluginId"}},t._l(t.allPlugins,function(e){return a("el-option-group",{key:e.groupName,attrs:{label:e.groupName}},t._l(e.plugins,function(t){return a("el-option",{key:t.pluginId,attrs:{label:t.pluginId,value:t.pluginId}})}),1)}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"插件版本",prop:"version"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择版本"},model:{value:t.form.version,callback:function(e){t.$set(t.form,"version",e)},expression:"form.version"}},t._l(t.allVersion,function(e){return a("el-option",{key:e.version,attrs:{label:e.version,value:e.version}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.version))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.pluginDescription))])])}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"同步安装"}},[a("el-switch",{model:{value:t.form.sync,callback:function(e){t.$set(t.form,"sync",e)},expression:"form.sync"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(v,b,!1,function(t){a("VWNS")},"data-v-16bbc30a",null).exports,k=a("bOdI"),y=a.n(k),w=a("BO1k"),S=a.n(w),C=a("Xxa5"),x=a.n(C),I=a("exGp"),z=a.n(I),N=(a("uGPS"),a("L6Z1")),F=a.n(N),D={props:{value:[String,Number,Object,Array],showBtns:[Boolean],expandedOnStart:{type:Boolean,default:!1},mode:{type:String,default:"tree"},modes:{type:Array,default:function(){return["tree","code","form","text","view"]}},lang:{type:String,default:"en"}},watch:{value:{immediate:!0,handler:function(t){var e=this;return z()(x.a.mark(function a(){return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.internalChange){a.next=5;break}return a.next=3,e.setEditor(t);case 3:e.error=!1,e.expandAll();case 5:case"end":return a.stop()}},a,e)}))()},deep:!0}},data:function(){return{editor:null,error:!1,json:this.value,internalChange:!1,expandedModes:["tree","view","form"],locale:{it:{save:"SALVA"},en:{save:"SAVE"},zh:{save:"保存"}}}},mounted:function(){var t=this,e={mode:this.mode,modes:this.modes,onChange:function(){try{var e=t.editor.get();t.json=e,t.error=!1,t.$emit("json-change",e),t.internalChange=!0,t.$emit("input",e),t.$nextTick(function(){t.internalChange=!1})}catch(e){t.error=!0,t.$emit("has-error",e)}},onModeChange:function(){t.expandAll()}};this.editor=new F.a(this.$el.querySelector(".jsoneditor-vue"),e,this.json)},methods:{expandAll:function(){this.expandedOnStart&&this.expandedModes.includes(this.editor.getMode())&&this.editor.expandAll()},onSave:function(){this.$emit("json-save",this.json)},setEditor:function(t){var e=this;return z()(x.a.mark(function a(){return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.editor&&e.editor.set(t);case 1:case"end":return a.stop()}},a,e)}))()}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"jsoneditor-vue"}),t._v(" "),!1!==t.showBtns?a("div",{staticClass:"jsoneditor-btns"},[a("button",{staticClass:"json-save-btn",attrs:{type:"button",disabled:t.error},on:{click:function(e){return t.onSave()}}},[t._v(t._s(t.locale[t.lang].save))])]):t._e()])},staticRenderFns:[]};var P,R=a("VU/8")(D,$,!1,function(t){a("hV9u")},"data-v-723cff9b",null).exports,V=(P={inject:["reload"],name:"Tasks",props:["groupName"],mounted:function(){var t=this;this.$nextTick(function(){t.$refs.main.scrollTop=t.$refs.content.scrollHeight})},data:function(){return{taskList:[],pluginInstallList:[],clazzList:[],dialogFormVisible:!1,taskDetailVisible:!1,dialogUpdateVisible:!1,dialogStateVisible:!1,form:{groupName:this.groupName,pluginId:"",taskName:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{},configJson:{},tags:{}},taskDetailForm:[],detailSettingJsonConfig:{},detailConfigJson:{},taskAssignedInfo:[],taskState:{created:{zh:"创建",color:""},started:{zh:"启动",color:"success"},suspend:{zh:"暂停",color:"info"},continued:{zh:"继续",color:"warning"},over:{zh:"结束",color:"over"}},states:{created:"创建",started:"启动",suspend:"暂停",continued:"继续",over:"结束"},dialogName:"提交任务",updateForm:{enableRebalance:!0,taskId:"",taskName:"",totalNumberOfPipline:0,tags:{}},stateForm:{taskId:"",taskState:""},totalPage:[],pageSize:10,pageTotal:1,dataShow:[],currentPage:0,multipleSelection:[],collapseActiveNames:["settingConfig","taskConfig","tagConfig"],defaultActiveModel:"json",taskConfigDefaultActiveModel:"json",settingConfigJsonTreeData:[],taskConfigJsonTreeData:[],defaultProps:{children:"fieldInfos",label:"fieldName"}}},components:{vueJsonEditor:R}},y()(P,"mounted",function(){this.initData(),this.getTasksByGroupName()}),y()(P,"watch",{}),y()(P,"methods",{clearData:function(){this.form={groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{},configJson:{}},this.taskDetailForm=[],this.dialogName="提交任务"},initData:function(){var t=this;this.taskList=[],this.multipleSelection=[],this.postRequest("mydataharbor/task/listTaskByGroup?groupName="+this.groupName).then(function(e){if(0==e.code){var a=e.data;for(var l in a)t.taskList.push(a[l]);t.initPageData()}})},getTasksByGroupName:function(){var t=this;this.getRequest("/mydataharbor/node/plugin?groupName="+this.groupName).then(function(e){t.pluginInstallList=e.data,console.log(t.pluginInstallList)})},submit:function(){var t=this;this.dialogFormVisible=!1,this.form.configJson=m()(this.form.configJson),this.form.settingJsonConfig=m()(this.form.settingJsonConfig),this.postRequest("mydataharbor/task/submit",this.form).then(function(e){-1==e.code&&t.$message.error(e.msg),0==e.code&&(t.$message.info("任务提交成功！"),t.initData(),t.clearData())})},cancel:function(){this.dialogFormVisible=!1,this.taskDetailVisible=!1,this.dialogUpdateVisible=!1,this.dialogStateVisible=!1,this.clearData()},selectPluginId:function(t){var e=this;this.clazzList=[],this.form.mydataharborCreatorClazz="",this.pluginInstallList.forEach(function(a){a.pluginId==t&&null!=a.dataSinkCreatorInfos&&a.dataSinkCreatorInfos.forEach(function(t){t.canCreatePipline&&e.clazzList.push({clazz:t.clazz,type:t.type})})})},creatorClazzChange:function(t){var e=this;this.form.settingJsonConfig={},this.form.configJson={},""!=t&&this.pluginInstallList.forEach(function(a){a.pluginId==e.form.pluginId&&a.dataSinkCreatorInfos.forEach(function(a){if(a.clazz==t){a.settingClassInfo.fieldName="root",a.configClassInfo.fieldName="root",e.settingConfigJsonTreeData=[a.settingClassInfo],e.taskConfigJsonTreeData=[a.configClassInfo];var l=!0,o=!1,n=void 0;try{for(var s,i=S()(a.settingClassInfo.fieldInfos);!(l=(s=i.next()).done);l=!0){var r=s.value;e.fillField(e.form.settingJsonConfig,r)}}catch(t){o=!0,n=t}finally{try{!l&&i.return&&i.return()}finally{if(o)throw n}}var u=!0,c=!1,d=void 0;try{for(var p,m=S()(a.configClassInfo.fieldInfos);!(u=(p=m.next()).done);u=!0){var f=p.value;e.fillField(e.form.configJson,f)}}catch(t){c=!0,d=t}finally{try{!u&&m.return&&m.return()}finally{if(c)throw d}}}})})},taskDetail:function(t){this.taskDetailForm=[],this.taskAssignedInfo=[];var e=JSON.parse(m()(t));this.detailConfigJson=JSON.parse(t.configJson),this.detailSettingJsonConfig=JSON.parse(t.settingJsonConfig);var a=t.taskAssignedInfo.assignedInfoMap;for(var l in a)this.taskAssignedInfo.push(a[l]);this.taskDetailForm.push(e),this.taskDetailVisible=!0},taskUpdate:function(t){this.updateForm.taskId=t.taskId,this.updateForm.taskName=t.taskName,this.updateForm.totalNumberOfPipline=t.totalNumberOfPipline,this.updateForm.enableRebalance=t.enableRebalance,this.updateForm.tags=t.tags,this.dialogUpdateVisible=!0},updateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/editTask",this.updateForm).then(function(e){0==e.code&&(t.$message.info("任务修改成功！"),t.initData())}),this.dialogUpdateVisible=!1},taskFork:function(t){this.dialogName="Fork任务",this.dialogFormVisible=!0,this.form=JSON.parse(m()(t)),this.form.configJson=JSON.parse(t.configJson),this.form.settingJsonConfig=JSON.parse(t.settingJsonConfig)},taskStates:function(t){this.stateForm.taskId=t.taskId,this.stateForm.taskState=t.taskState,this.dialogStateVisible=!0},taskDelete:function(t){var e=this;this.$confirm("是否永久删除该任务："+t.taskId,"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){e.postRequest("/mydataharbor/task/deleteTask?taskId="+t.taskId).then(function(t){0==t.code?e.$message({type:"info",message:"删除成功！"}):e.$message({type:"warning",message:"删除失败！"+t.msg})}),e.initData()})},updateStateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/manageTaskState?taskId="+this.stateForm.taskId+"&taskState="+this.stateForm.taskState).then(function(e){0==e.code?(t.$message.info("任务状态修改成功！"),t.initData()):t.$message.error(e.msg)}),this.dialogStateVisible=!1},initPageData:function(){this.pageTotal=this.taskList.length;for(var t=0;t<this.pageTotal;t++)this.totalPage[t+1]=this.taskList.slice(this.pageSize*t,this.pageSize*(t+1));this.handlePageChange(1)},handlePageChange:function(t){this.currentPage=t,this.dataShow=this.totalPage[this.currentPage]},handleSizeChange:function(t){this.pageSize=t,this.initPageData()},handleSelectionChange:function(t){this.multipleSelection=t},batchDelete:function(){var t=this;if(console.log(this.multipleSelection),0!=this.multipleSelection.length){var e=0;this.$confirm("是否永久删除已选的"+this.multipleSelection.length+"条数据","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.multipleSelection.forEach(function(a){t.postRequest("/mydataharbor/task/deleteTask?taskId="+a.taskId).then(function(a){0==a.code&&(e+=1)==t.multipleSelection.length&&t.$message({type:"info",message:"成功删除"+e+"条数据！"})})}),t.reload()})}else this.$message.info("当前未选择任务任务数据，请先勾选需要删除的数据！")},renderTreeContent:function(t,e){e.node;var a=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",[a.fieldName," ",a.title," 【类型:",a.clazzStr,"】【",1==a.array?"数组":1==a.map?"map":1==a.baseType?"基础类型":"对象","】",1==a.enumeration?"【枚举】候选值:"+m()(a.candidateValue):"",1==a.require?"【必须】":"【非必须】",null!=a.defaultValue&&""!=a.defaultValue?"【默认值："+a.defaultValue+"】":"",a.des])])},fillField:function(t,e){if(e.require&&(e.array?t[e.fieldName]=[]:e.map?t[e.fieldName]={}:e.baseType?t[e.fieldName]=e.defaultValue:t[e.fieldName]={},null!=e.fieldInfos&&e.fieldInfos.length>0)){var a=!0,l=!1,o=void 0;try{for(var n,s=S()(e.fieldInfos);!(a=(n=s.next()).done);a=!0){var i=n.value;this.fillField(t[e.fieldName],i)}}catch(t){l=!0,o=t}finally{try{!a&&s.return&&s.return()}finally{if(l)throw o}}}}}),P),J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("提交任务")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.batchDelete()}}},[t._v("批量删除")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.dataShow,border:"",width:"100%","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"240",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务名",width:"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[void 0!=e.row.taskName?a("span",[t._v(t._s(e.row.taskName))]):a("span",[t._v("null")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.taskState[e.row.taskState].color,size:"small"}},[t._v(t._s(t.taskState[e.row.taskState].zh)+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"250","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"mydataharborCreatorClazz",label:"创建器","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"144",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FormatDate")(e.row.createTime,"yyyy-MM-dd HH:mm")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"144",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FormatDate")(e.row.lastUpdateTime,"yyyy-MM-dd HH:mm")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"tags",width:"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[void 0!=e.row.tags?a("span",[t._v(t._s(e.row.tags))]):a("span",[t._v("null")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.taskDetail(e.row)}}},[t._v("详情")]),t._v(" "),a("el-button",{staticStyle:{color:"#67C23A"},attrs:{type:"text"},on:{click:function(a){return t.taskUpdate(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{color:"#E6A23C"},attrs:{type:"text"},on:{click:function(a){return t.taskFork(e.row)}}},[t._v("fork")]),t._v(" "),a("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text"},on:{click:function(a){return t.taskStates(e.row)}}},[t._v("状态")]),t._v(" "),a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text"},on:{click:function(a){return t.taskDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":t.currentPage,"page-sizes":[5,10,20,50,100],"page-size":t.pageSize,total:t.pageTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogName,visible:t.dialogFormVisible,width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small",disabled:""},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"插件ID",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择组件ID",size:"small"},on:{change:t.selectPluginId},model:{value:t.form.pluginId,callback:function(e){t.$set(t.form,"pluginId",e)},expression:"form.pluginId"}},t._l(t.pluginInstallList,function(t){return a("el-option",{key:t.id,attrs:{label:t.pluginId,value:t.pluginId}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"管道数"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small"},model:{value:t.form.totalNumberOfPipline,callback:function(e){t.$set(t.form,"totalNumberOfPipline",e)},expression:"form.totalNumberOfPipline"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建器"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择CreatorClazz",size:"small"},on:{change:t.creatorClazzChange},model:{value:t.form.mydataharborCreatorClazz,callback:function(e){t.$set(t.form,"mydataharborCreatorClazz",e)},expression:"form.mydataharborCreatorClazz"}},t._l(t.clazzList,function(t){return a("el-option",{key:t.id,attrs:{label:t.type+t.clazz,value:t.clazz}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入任务名",autocomplete:"off",size:"small"},model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负载均衡"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否负载均衡",size:"small"},model:{value:t.form.enableRebalance,callback:function(e){t.$set(t.form,"enableRebalance",e)},expression:"form.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1),t._v(" "),a("el-alert",{staticStyle:{"margin-top":"-20px"},attrs:{title:"值为false，节点停机，任务将不会自动转移！",type:"info","show-icon":""}})],1)],1)],1),t._v(" "),a("el-collapse",{model:{value:t.collapseActiveNames,callback:function(e){t.collapseActiveNames=e},expression:"collapseActiveNames"}},[a("el-collapse-item",{attrs:{title:"settingContextConfig",name:"settingConfig"}},[a("el-tabs",{model:{value:t.defaultActiveModel,callback:function(e){t.defaultActiveModel=e},expression:"defaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.settingJsonConfig,callback:function(e){t.$set(t.form,"settingJsonConfig",e)},expression:"form.settingJsonConfig"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:t.settingConfigJsonTreeData,props:t.defaultProps,"default-expand-all":!0,"render-content":t.renderTreeContent}})],1)],1)],1),t._v(" "),a("el-collapse-item",{attrs:{title:"taskConfig",name:"taskConfig"}},[a("el-tabs",{model:{value:t.taskConfigDefaultActiveModel,callback:function(e){t.taskConfigDefaultActiveModel=e},expression:"taskConfigDefaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.configJson,callback:function(e){t.$set(t.form,"configJson",e)},expression:"form.configJson"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:t.taskConfigJsonTreeData,props:t.defaultProps,"default-expand-all":!0,"render-content":t.renderTreeContent}})],1)],1)],1),t._v(" "),a("el-collapse-item",{attrs:{title:"tagConfig",name:"tagConfig"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务详情",visible:t.taskDetailVisible,width:"60%"},on:{"update:visible":function(e){t.taskDetailVisible=e}}},[a("p",[t._v("基本信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskDetailForm}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("任务分配信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskAssignedInfo}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("管道信息：")]),t._v(" "),t._l(e.row.piplineStates,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])}),t._v(" "),a("el-divider"),t._v(" "),a("p",[t._v("写总计：")]),t._v(" "),t._l(e.row.writeTotal,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])})]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"diverted",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.diverted?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"createException",label:"创建异常","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.createException?a("span",[t._v("无")]):a("span",[t._v(t._s(e.row.createException))])]}}],null,!0)})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"200","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"200","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"mydataharborCreatorClazz",label:"创建器"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数"}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])})],1),t._v(" "),a("p",[t._v("任务设置")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailSettingJsonConfig,callback:function(e){t.detailSettingJsonConfig=e},expression:"detailSettingJsonConfig"}}),t._v(" "),a("p",[t._v("任务行为")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailConfigJson,callback:function(e){t.detailConfigJson=e},expression:"detailConfigJson"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务修改",visible:t.dialogUpdateVisible,width:"42%"},on:{"update:visible":function(e){t.dialogUpdateVisible=e}}},[a("el-form",{attrs:{model:t.updateForm,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.updateForm.taskId,callback:function(e){t.$set(t.updateForm,"taskId",e)},expression:"updateForm.taskId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"管道数","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:t.updateForm.totalNumberOfPipline,callback:function(e){t.$set(t.updateForm,"totalNumberOfPipline",e)},expression:"updateForm.totalNumberOfPipline"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务名","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:t.updateForm.taskName,callback:function(e){t.$set(t.updateForm,"taskName",e)},expression:"updateForm.taskName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负载均衡","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择是否负载均衡"},model:{value:t.updateForm.enableRebalance,callback:function(e){t.$set(t.updateForm,"enableRebalance",e)},expression:"updateForm.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1)],1)],1),t._v(" "),a("p",[t._v("tags其它属性")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.updateForm.tags,callback:function(e){t.$set(t.updateForm,"tags",e)},expression:"updateForm.tags"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateFormSubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务状态",visible:t.dialogStateVisible,width:"23%"},on:{"update:visible":function(e){t.dialogStateVisible=e}}},[a("el-form",{attrs:{model:t.stateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.stateForm.taskId,callback:function(e){t.$set(t.stateForm,"taskId",e)},expression:"stateForm.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务状态","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择任务状态"},model:{value:t.stateForm.taskState,callback:function(e){t.$set(t.stateForm,"taskState",e)},expression:"stateForm.taskState"}},t._l(t.states,function(t,e){return a("el-option",{attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateStateFormSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var T=a("VU/8")(V,J,!1,function(t){a("mQvB")},"data-v-26b43b96",null).exports,O=a("8U58"),A=a.n(O),M=(a("4/hK"),a("hD67"),a("tPrY"),a("9ozf"),a("lYxz"),window.CodeMirror||A.a),q={name:"Script",props:{groupName:String,value:String,language:{type:String,default:null}},data:function(){return{code:"def cal(int a, int b){\n  return a+b\n}\n",mode:"groovy",coder:null,options:{tabSize:8,theme:"abcdef",lineNumbers:!0,line:!0}}},mounted:function(){this._initialize()},methods:{_initialize:function(){var t=this;if(this.coder=M.fromTextArea(this.$refs.textarea,this.options),this.coder.setValue(this.value||this.code),this.coder.on("change",function(e){t.code=e.getValue(),t.$emit&&t.$emit("input",t.code)}),this.language){var e=this._getLanguage(this.language);e&&(this.mode=e.label)}},changeMode:function(){}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"in-coder-panel"},[a("div",{staticStyle:{margin:"20px 0 20px 0"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:6}},[a("div",[t._v("\n          输入源："),a("el-select",{staticClass:"code-mode-select",attrs:{size:"small",value:""},on:{change:t.changeMode}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",[t._v("\n          输出源："),a("el-select",{staticClass:"code-mode-select",attrs:{size:"small",value:""},on:{change:t.changeMode}})],1)])],1)],1),t._v(" "),a("div",[a("textarea",{ref:"textarea"})]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("提交执行")])],1)])},staticRenderFns:[]};var E={inject:["reload"],name:"operation",props:["groupName"],data:function(){return{}},methods:{deleteGroup:function(){var t=this;this.$confirm("此操作将永久删除【"+this.groupName+"】集群, 是否继续?","确认提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.getRequest("/mydataharbor/node/deleteGroup?groupName="+t.groupName).then(function(e){console.log(e),0==e.code?(t.$message({type:"success",message:"删除成功!"}),t.reload()):t.$message({type:"error",message:"删除失败，"+e.msg})})}).catch(function(){t.$message({type:"info",message:"已取消删除!"})})}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tag",[t._v("当前分组： "+t._s(t.groupName))]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",size:"small"},on:{click:function(e){return t.deleteGroup()}}},[t._v("删除该分组")])],1)},staticRenderFns:[]};var B={name:"Cluster",components:{Tasks:T,Plugins:_,Node:h,Script:a("VU/8")(q,L,!1,function(t){a("hP/U")},null,null).exports,Operation:a("VU/8")(E,j,!1,function(t){a("x9FL")},"data-v-441da743",null).exports},data:function(){return{cluster:{},selectGroup:"",selectOption:"节点"}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.getRequest("mydataharbor/node/groupList").then(function(e){if(0==e.code){t.cluster=e.data;var a=t.$router.history.current.query,l=JSON.parse(m()(a));null!=l.selectOption&&(t.selectOption=l.selectOption),t.selectGroup=l.selectGroup;var o="",n=0,s=!1;for(var i in t.cluster)0==n&&(o=i),n++,null!=t.selectGroup&&t.selectGroup==i&&(s=!0);s||(t.selectGroup=o)}})},groupChange:function(t,e){var a=this.$router.history.current.query,l=this.$router.history.current.path,o=JSON.parse(m()(a));o.selectGroup=t.name,this.$router.push({path:l,query:o})},optionChange:function(t,e){var a=this.$router.history.current.query,l=this.$router.history.current.path,o=JSON.parse(m()(a));o.selectOption=t.name,this.$router.push({path:l,query:o})}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":t.groupChange},model:{value:t.selectGroup,callback:function(e){t.selectGroup=e},expression:"selectGroup"}},t._l(t.cluster,function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.groupName,name:e.groupName,lazy:!0}},[a("el-tabs",{staticStyle:{"margin-left":"10px"},attrs:{"active-name":"first"},on:{"tab-click":t.optionChange},model:{value:t.selectOption,callback:function(e){t.selectOption=e},expression:"selectOption"}},[a("el-tab-pane",{attrs:{label:"节点",name:"节点",lazy:!0}},[a("Node",{attrs:{"node-list":e.nodeInfos}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"插件",name:"插件",lazy:!0}},[a("Plugins",{attrs:{"group-name":e.groupName}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"任务",name:"任务",lazy:!0}},[a("Tasks",{attrs:{"group-name":e.groupName}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"操作",name:"操作",lazy:!0}},[a("Operation",{attrs:{"group-name":e.groupName}})],1)],1)],1)}),1)],1)},staticRenderFns:[]};var H=a("VU/8")(B,U,!1,function(t){a("wH+j")},"data-v-2d6af16c",null).exports,G={name:"Plugin",data:function(){return{query:{pageNo:1,pageSize:10,pluginId:"",version:"",des:""},tableData:[],cloudData:[],pageTotal:0,showFile:!0,pluginTabActive:"localPlugin",repoForm:{repoName:"",config:{email:"",token:""}}}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;console.log("loading info……"),this.getRequest("mydataharbor/plugin/listPlugins",this.query).then(function(e){t.tableData=e.data["本地存储库"],t.cloudData=e.data["MyDataHarbor官方插件存储库"],console.log(e)}),this.getRequest("mydataharbor/plugin/queryPluginRepoConfig",this.query).then(function(e){t.repoForm.config=e.data["MyDataHarbor-Reporsitory"].config,console.log(e)})},downloadToLocal:function(t){var e=this;this.$message.warning("下载插件需要不少时间，请耐心等待！"),this.setLoadingMsg("服务器带宽有限，努力下载中..."),this.getRequest(t).then(function(t){0==t.code?(e.$message.info("下载成功！"),e.initData()):e.$message.warning(t.msg)})},configPluginRepo:function(){var t=this;this.repoForm.repoName="MyDataHarbor-Reporsitory",this.postRequest("mydataharbor/plugin/configPluginRepo",this.repoForm).then(function(e){0==e.code?(t.$message.info("Token修改成功！"),t.initData()):t.$message.warning(e.msg)})},clear:function(){this.initData()},handleSuccess:function(t,e){console.log("success"),-1==t.code&&(this.$message.error(t.msg),this.showFile=!1)},handleError:function(t,e,a){console.log("error"+t),console.log(e),console.log(a)}}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("el-tabs",{attrs:{type:"card"},model:{value:t.pluginTabActive,callback:function(e){t.pluginTabActive=e},expression:"pluginTabActive"}},[a("el-tab-pane",{attrs:{label:"本地插件",name:"localPlugin"}},[a("div",{staticClass:"handle-box"},[a("div",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/mydataharbor/plugin/uploadPlugin","on-success":t.handleSuccess,"on-error":t.handleError,"show-file-list":t.showFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传插件")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jar文件，且不超过500M")])],1)],1)]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},t._l(t.tableData,function(e,l){return l%2==0?a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=e.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:e.imageBase64}}):t._e(),t._v("\n                  "+t._s(e.groupName)+"\n                ")]),t._v(" "),a("el-collapse",{attrs:{value:e.plugins[0].pluginId}},t._l(e.plugins,function(e){return a("el-collapse-item",{attrs:{title:e.pluginId,name:e.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{fit:!0,data:e.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.dependencies,function(e){return a("p",{staticStyle:{color:"#8492a6","font-size":"13px"}},[t._v("【插件id:"+t._s(e.pluginId)+",版本:"+t._s(e.pluginVersionSupport)+",可选："+t._s(e.optional)+"】")])})}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{href:"/mydataharbor/plugin/downloadPlugin?pluginId="+e.row.pluginId+"&version="+e.row.version,type:"primary",icon:"el-icon-download",target:"_blank"}},[t._v("下载\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):t._e()}),1),t._v(" "),a("el-col",{attrs:{span:12}},t._l(t.tableData,function(e,l){return l%2==1?a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=e.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:e.imageBase64}}):t._e(),t._v("\n                  "+t._s(e.groupName)+"\n                ")]),t._v(" "),a("el-collapse",{attrs:{value:e.plugins[0].pluginId}},t._l(e.plugins,function(e){return a("el-collapse-item",{attrs:{title:e.pluginId,name:e.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{fit:!0,data:e.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.dependencies,function(e){return a("p",{staticStyle:{color:"#8492a6","font-size":"13px"}},[t._v("【插件id:"+t._s(e.pluginId)+",版本:"+t._s(e.pluginVersionSupport)+",可选："+t._s(e.optional)+"】")])})}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{href:"/mydataharbor/plugin/downloadPlugin?pluginId="+e.row.pluginId+"&version="+e.row.version,type:"primary",icon:"el-icon-download",target:"_blank"}},[t._v("下载\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):t._e()}),1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"插件市场",name:"cloudPlugin"}},[a("div",{staticClass:"handle-box"},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.repoForm}},[a("el-form-item",{attrs:{label:"email"}},[a("el-input",{attrs:{placeholder:"email"},model:{value:t.repoForm.config.email,callback:function(e){t.$set(t.repoForm.config,"email",e)},expression:"repoForm.config.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"token"}},[a("el-input",{attrs:{placeholder:"token",type:"password"},model:{value:t.repoForm.config.token,callback:function(e){t.$set(t.repoForm.config,"token",e)},expression:"repoForm.config.token"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.configPluginRepo}},[t._v("修改")])],1),t._v(" "),a("el-form-item",[a("a",{attrs:{target:"_blank",href:"https://www.mydataharbor.com/user/info.html"}},[t._v("获取账户Token")])])],1)],1)]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},t._l(t.cloudData,function(e,l){return l%2==0?a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=e.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:e.imageBase64}}):t._e(),t._v("\n                  "+t._s(e.groupName)+"\n                ")]),t._v(" "),a("el-collapse",{attrs:{value:e.plugins[0].pluginId}},t._l(e.plugins,function(e){return a("el-collapse-item",{attrs:{title:e.pluginId,name:e.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{data:e.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),t._v(" "),a("el-table-column",{attrs:{label:"授权"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.authed?a("el-tag",{attrs:{size:"small"}},[t._v("已授权")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("未授权")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.dependencies,function(e){return a("p",[t._v("【插件id:"+t._s(e.pluginId)+",版本:"+t._s(e.pluginVersionSupport)+",可选："+t._s(e.optional)+"】")])})}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(a){return t.downloadToLocal("/mydataharbor/plugin/downloadToLocal?pluginId="+e.row.pluginId+"&version="+e.row.version+"&repoType=MyDataHarbor-Reporsitory")}}},[t._v("\n                            下载到本地\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):t._e()}),1),t._v(" "),a("el-col",{attrs:{span:12}},t._l(t.cloudData,function(e,l){return l%2==1?a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=e.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:e.imageBase64}}):t._e(),t._v("\n                  "+t._s(e.groupName)+"\n                ")]),t._v(" "),a("el-collapse",{attrs:{value:e.plugins[0].pluginId}},t._l(e.plugins,function(e){return a("el-collapse-item",{attrs:{title:e.pluginId,name:e.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{data:e.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),t._v(" "),a("el-table-column",{attrs:{label:"授权"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.authed?a("el-tag",{attrs:{size:"small"}},[t._v("已授权")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("未授权")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.dependencies,function(e){return a("p",[t._v("【插件id:"+t._s(e.pluginId)+",版本:"+t._s(e.pluginVersionSupport)+",可选："+t._s(e.optional)+"】")])})}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(a){return t.downloadToLocal("/mydataharbor/plugin/downloadToLocal?pluginId="+e.row.pluginId+"&version="+e.row.version+"&repoType=MyDataHarbor-Reporsitory")}}},[t._v("\n                            下载到本地\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):t._e()}),1)],1)],1)],1)],1)])},staticRenderFns:[]};var W=a("VU/8")(G,Y,!1,function(t){a("YBvO")},"data-v-0b58087b",null).exports,K={inject:["reload"],name:"Tasks",props:["groupName"],data:function(){return{taskList:[],pluginInstallList:[],clazzList:[],dialogFormVisible:!1,taskDetailVisible:!1,dialogUpdateVisible:!1,dialogStateVisible:!1,form:{groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{parallel:!1,threadNum:1,batch:!1,sleepTime:0},configJson:{},tags:{}},taskDetailForm:[],detailSettingJsonConfig:{},detailConfigJson:{},taskAssignedInfo:[],taskState:{created:{zh:"创建",color:""},started:{zh:"启动",color:"success"},suspend:{zh:"暂停",color:"info"},continued:{zh:"继续",color:"warning"},over:{zh:"结束",color:"over"}},states:{created:"创建",started:"启动",suspend:"暂停",continued:"继续",over:"结束"},dialogName:"提交任务",updateForm:{enableRebalance:!0,taskId:"",taskName:"",totalNumberOfPipline:0,tags:{}},stateForm:{taskId:"",taskState:""},totalPage:[],pageSize:10,pageTotal:1,dataShow:[],currentPage:0,multipleSelection:[]}},components:{vueJsonEditor:R},mounted:function(){this.initData(),this.getTasksByGroupName()},methods:{clearData:function(){this.form={groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{parallel:!1,threadNum:1,batch:!1},configJson:{}},this.taskDetailForm=[],this.dialogName="提交任务"},initData:function(){var t=this;this.taskList=[],this.postRequest("mydataharbor/task/listTask").then(function(e){if(0==e.code){var a=e.data;for(var l in a)t.taskList.push(a[l]);t.initPageData()}})},getTasksByGroupName:function(){var t=this;this.getRequest("/mydataharbor/node/plugin?groupName="+this.groupName).then(function(e){t.pluginInstallList=e.data})},submit:function(){var t=this;this.dialogFormVisible=!1,this.form.configJson=m()(this.form.configJson),this.form.settingJsonConfig=m()(this.form.settingJsonConfig),this.postRequest("mydataharbor/task/submit",this.form).then(function(e){-1==e.code&&t.$message.error(e.msg),0==e.code&&(t.$message.info("任务fork成功！"),t.initData(),t.clearData())})},cancel:function(){this.dialogFormVisible=!1,this.taskDetailVisible=!1,this.dialogUpdateVisible=!1,this.dialogStateVisible=!1,this.clearData()},selectPluginId:function(t){var e=this;this.clazzList=[],this.pluginInstallList.forEach(function(a){a.pluginId==t&&a.dataSinkCreatorInfos.forEach(function(t){e.clazzList.push(t.clazz)})})},taskDetail:function(t){this.taskDetailForm=[],this.taskAssignedInfo=[];var e=JSON.parse(m()(t));this.detailConfigJson=JSON.parse(t.configJson),this.detailSettingJsonConfig=JSON.parse(t.settingJsonConfig);var a=t.taskAssignedInfo.assignedInfoMap;for(var l in a)this.taskAssignedInfo.push(a[l]);console.log(this.taskAssignedInfo),this.taskDetailForm.push(e),console.log(this.taskDetailForm),this.taskDetailVisible=!0},taskUpdate:function(t){this.updateForm.taskId=t.taskId,this.updateForm.taskName=t.taskName,this.updateForm.totalNumberOfPipline=t.totalNumberOfPipline,this.updateForm.enableRebalance=t.enableRebalance,this.updateForm.tags=t.tags,this.dialogUpdateVisible=!0},updateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/editTask",this.updateForm).then(function(e){0==e.code?(t.$message.info("任务修改成功！"),t.initData()):t.$message.warning(e.msg)}),this.dialogUpdateVisible=!1},taskFork:function(t){this.dialogName="Fork任务",this.dialogFormVisible=!0,this.form=JSON.parse(m()(t)),this.form.configJson=JSON.parse(t.configJson),this.form.settingJsonConfig=JSON.parse(t.settingJsonConfig)},taskStates:function(t){this.stateForm.taskId=t.taskId,this.stateForm.taskState=t.taskState,this.dialogStateVisible=!0},taskDelete:function(t){var e=this;this.$confirm("是否永久删除该任务："+t.taskId,"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.postRequest("/mydataharbor/task/deleteTask?taskId="+t.taskId).then(function(t){0==t.code?e.$message({type:"info",message:"删除成功！"}):e.$message({type:"warning",message:"删除失败！"+t.msg})}),e.reload()})},updateStateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/manageTaskState?taskId="+this.stateForm.taskId+"&taskState="+this.stateForm.taskState).then(function(e){0==e.code?(t.$message.info("任务状态修改成功！"),t.initData()):t.$message.error(e.msg)}),this.dialogStateVisible=!1},initPageData:function(){this.pageTotal=this.taskList.length;for(var t=0;t<this.pageTotal;t++)this.totalPage[t+1]=this.taskList.slice(this.pageSize*t,this.pageSize*(t+1));this.handlePageChange(1)},handlePageChange:function(t){this.currentPage=t,this.dataShow=this.totalPage[this.currentPage]},handleSizeChange:function(t){this.pageSize=t,this.initPageData()},handleSelectionChange:function(t){this.multipleSelection=t},batchDelete:function(){var t=this;if(console.log(this.multipleSelection),0!=this.multipleSelection.length){var e=0;this.$confirm("是否永久删除已选的"+this.multipleSelection.length+"条数据","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){t.multipleSelection.forEach(function(a){t.postRequest("/mydataharbor/task/deleteTask?taskId="+a.taskId).then(function(a){0==a.code&&(e+=1)==t.multipleSelection.length&&t.$message({type:"info",message:"成功删除"+e+"条数据！"})})}),t.reload()})}else this.$message.info("当前未选择任务任务数据，请先勾选需要删除的数据！")}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.batchDelete()}}},[t._v("批量删除")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.dataShow,border:"",width:"100%","max-height":"750","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"220",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"任务名",width:"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[null!=e.row.taskName?a("span",[t._v(t._s(e.row.taskName))]):a("span",[t._v("null")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.taskState[e.row.taskState].color,size:"small","show-overflow-tooltip":!0}},[t._v(t._s(t.taskState[e.row.taskState].zh))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"144",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FormatDate")(e.row.createTime,"yyyy-MM-dd HH:mm")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"144",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FormatDate")(e.row.lastUpdateTime,"yyyy-MM-dd HH:mm")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"tags",width:"120","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[void 0!=e.row.tags?a("span",[t._v(t._s(e.row.tags))]):a("span",[t._v("null")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.taskDetail(e.row)}}},[t._v("详情")]),t._v(" "),a("el-button",{staticStyle:{color:"#67C23A"},attrs:{type:"text"},on:{click:function(a){return t.taskUpdate(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{color:"#E6A23C"},attrs:{type:"text"},on:{click:function(a){return t.taskFork(e.row)}}},[t._v("fork")]),t._v(" "),a("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text"},on:{click:function(a){return t.taskStates(e.row)}}},[t._v("状态")]),t._v(" "),a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text"},on:{click:function(a){return t.taskDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":t.currentPage,"page-sizes":[5,10,20,50,100],"page-size":t.pageSize,total:t.pageTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handlePageChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogName,visible:t.dialogFormVisible,width:"42%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small",disabled:""},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组件ID",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择组件ID",size:"small"},on:{change:t.selectPluginId},model:{value:t.form.pluginId,callback:function(e){t.$set(t.form,"pluginId",e)},expression:"form.pluginId"}},t._l(t.pluginInstallList,function(t){return a("el-option",{key:t.id,attrs:{label:t.pluginId,value:t.pluginId}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"管道数"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small"},model:{value:t.form.totalNumberOfPipline,callback:function(e){t.$set(t.form,"totalNumberOfPipline",e)},expression:"form.totalNumberOfPipline"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类路径"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择CreatorClazz",size:"small"},model:{value:t.form.mydataharborCreatorClazz,callback:function(e){t.$set(t.form,"mydataharborCreatorClazz",e)},expression:"form.mydataharborCreatorClazz"}},t._l(t.clazzList,function(t){return a("el-option",{key:t.id,attrs:{label:t,value:t}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"负载均衡"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择是否负载均衡",size:"small"},model:{value:t.form.enableRebalance,callback:function(e){t.$set(t.form,"enableRebalance",e)},expression:"form.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{space:14}},[a("el-alert",{attrs:{title:"无负载均衡，如果节点停机，节点任务不会自动转移！",type:"info","show-icon":""}})],1)],1)],1),t._v(" "),a("p",[t._v("任务设置")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.settingJsonConfig,callback:function(e){t.$set(t.form,"settingJsonConfig",e)},expression:"form.settingJsonConfig"}}),t._v(" "),a("p",[t._v("任务行为")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.configJson,callback:function(e){t.$set(t.form,"configJson",e)},expression:"form.configJson"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务详情",visible:t.taskDetailVisible,width:"42%"},on:{"update:visible":function(e){t.taskDetailVisible=e}}},[a("p",[t._v("基本信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskDetailForm}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("任务分配信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskAssignedInfo}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("管道信息：")]),t._v(" "),t._l(e.row.piplineStates,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])}),t._v(" "),a("el-divider"),t._v(" "),a("p",[t._v("写总计：")]),t._v(" "),t._l(e.row.writeTotal,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])})]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"diverted",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.diverted?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"createException",label:"创建异常","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.createException?a("span",[t._v("无")]):a("span",[t._v(t._s(e.row.createException))])]}}],null,!0)})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"组名",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"180","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"200","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数"}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])})],1),t._v(" "),a("p",[t._v("任务设置")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailSettingJsonConfig,callback:function(e){t.detailSettingJsonConfig=e},expression:"detailSettingJsonConfig"}}),t._v(" "),a("p",[t._v("任务行为")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailConfigJson,callback:function(e){t.detailConfigJson=e},expression:"detailConfigJson"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务修改",visible:t.dialogUpdateVisible,width:"42%"},on:{"update:visible":function(e){t.dialogUpdateVisible=e}}},[a("el-form",{attrs:{model:t.updateForm,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.updateForm.taskId,callback:function(e){t.$set(t.updateForm,"taskId",e)},expression:"updateForm.taskId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"管道数","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:t.updateForm.totalNumberOfPipline,callback:function(e){t.$set(t.updateForm,"totalNumberOfPipline",e)},expression:"updateForm.totalNumberOfPipline"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务名","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:t.updateForm.taskName,callback:function(e){t.$set(t.updateForm,"taskName",e)},expression:"updateForm.taskName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负载均衡","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择是否负载均衡"},model:{value:t.updateForm.enableRebalance,callback:function(e){t.$set(t.updateForm,"enableRebalance",e)},expression:"updateForm.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1)],1)],1),t._v(" "),a("p",[t._v("tags其它属性")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.updateForm.tags,callback:function(e){t.$set(t.updateForm,"tags",e)},expression:"updateForm.tags"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateFormSubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务状态",visible:t.dialogStateVisible,width:"23%"},on:{"update:visible":function(e){t.dialogStateVisible=e}}},[a("el-form",{attrs:{model:t.stateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.stateForm.taskId,callback:function(e){t.$set(t.stateForm,"taskId",e)},expression:"stateForm.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务状态","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择任务状态"},model:{value:t.stateForm.taskState,callback:function(e){t.$set(t.stateForm,"taskState",e)},expression:"stateForm.taskState"}},t._l(t.states,function(t,e){return a("el-option",{attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateStateFormSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var X=a("VU/8")(K,Q,!1,function(t){a("Y8kS")},"data-v-1d6a8889",null).exports,Z=a("//Fk"),tt=a.n(Z),et=a("mtWM"),at=a.n(et),lt=a("zL8q"),ot=a.n(lt);l.default.use(lt.Loading);var nt=void 0,st="拼命加载中...";at.a.interceptors.request.use(function(t){return nt=lt.Loading.service({lock:!0,text:st,background:"rgba(255,255,255,0)"}),t},function(t){return tt.a.reject(t)}),at.a.interceptors.response.use(function(t){if(nt.close(),st="拼命加载中...",!t.status||200!=t.status||500!=t.data.status)return t.data;lt.Message.error({message:t.data.msg})},function(t){504==t.response.status||404==t.response.status?lt.Message.error({message:"服务端宕机了！"}):403==t.response.status?lt.Message.error({message:"权限不足，请联系管理员！"}):401==t.response.status?(lt.Message.error({message:"尚未登录，请登录！"}),it.replace("/")):t.response.data.msg?lt.Message.error({message:t.response.data.msg}):lt.Message.error({message:"未知错误！"})});l.default.prototype.postRequest=function(t,e){return at()({method:"post",url:""+t,data:e})},l.default.prototype.getRequest=function(t,e){return at()({method:"get",url:""+t,params:e})},l.default.prototype.postKeyValueRequest=function(t,e){return at()({method:"post",url:""+t,data:e,transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return console.log(e),e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},l.default.prototype.putRequest=function(t,e){return at()({method:"put",url:""+t,data:e})},l.default.prototype.deleteRequest=function(t,e){return at()({method:"delete",url:""+t,params:e})},l.default.prototype.setLoadingMsg=function(t){st=t},l.default.use(s.a),l.default.config.productionTip=!1;var it=new s.a({routes:[{path:"/",name:"首页",component:d,hidden:!0},{path:"/home",name:"home",component:d,hidden:!0,children:[{path:"/cluster",name:"集群管理",component:H,hidden:!0},{path:"/plugin",name:"插件管理",component:W,hidden:!0},{path:"/task",name:"任务管理",component:X,hidden:!0}]}]});a("tvR6");l.default.config.productionTip=!1,l.default.use(ot.a),l.default.filter("FormatDate",function(t,e){return function(t,e){t=new Date(t),void 0===e&&(e="yyyy-MM-dd HH:mm:ss"),/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var l in a)if(new RegExp("("+l+")").test(e)){var o=a[l]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:("00"+o).substr(o.length))}return e}(t,e)}),new l.default({el:"#app",router:it,components:{App:n},template:"<App/>"})},ONMz:function(t,e,a){t.exports=a.p+"static/img/mydataharbor.fca5557.png"},VWNS:function(t,e){},Y8kS:function(t,e){},YBvO:function(t,e){},hD67:function(t,e){},"hP/U":function(t,e){},hV9u:function(t,e){},mQvB:function(t,e){},tPrY:function(t,e){},tvR6:function(t,e){},uGPS:function(t,e){},"wH+j":function(t,e){},x9FL:function(t,e){},yJxx:function(t,e){}},["NHnr"]);