webpackJsonp([1],{"7Otq":function(t,e){t.exports="data:image/png;base64,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"},"8uHG":function(t,e){},AG7m:function(t,e){},B9mo:function(t,e){},CIw6:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},o,!1,function(t){a("e+L+")},null,null).exports,i=a("/ocq"),n={name:"Dashboard",data:function(){return{imgSrc:a("7Otq")}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{attrs:{src:this.imgSrc,alt:""}}),this._v(" "),e("p",[this._v("MyDataHarbor是一个致力于解决任意数据源到任意数据端的分布式、高扩展性、高性能、事务级的中间件。")]),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("a",{attrs:{href:"https://bbs.mydataharbor.com"}},[this._v("社区链接")]),this._v("  \n "),e("a",{attrs:{href:"https://github.com/xulang/mydataharbor"}},[this._v("github链接")])])}]};var u={name:"Home",components:{DashBoard:a("VU/8")(n,r,!1,function(t){a("oHEE")},"data-v-0382e4f4",null).exports},data:function(){return{}},computed:{},methods:{}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("el-header",{staticClass:"homeHeader"},[a("div",{staticClass:"title"},[t._v("MyDataHarbor")])]),t._v(" "),a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{"margin-left":"5px"},attrs:{width:"200px"}},[a("el-menu",{staticStyle:{height:"100%"},attrs:{router:"","unique-opened":"","default-active":"1"}},[a("el-menu-item",{attrs:{index:"../home"}},[a("i",{staticClass:"el-icon-menu",staticStyle:{color:"#409eff","margin-left":"-5px"}}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._v(" "),a("el-menu-item",{attrs:{index:"../cluster"}},[a("i",{staticClass:"el-icon-s-help",staticStyle:{color:"#409eff","margin-left":"-5px"}}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("集群管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"../plugin"}},[a("i",{staticClass:"el-icon-s-data",staticStyle:{color:"#409eff","margin-left":"-5px"}}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("插件仓库")])]),t._v(" "),a("el-menu-item",{attrs:{index:"../task"}},[a("i",{staticClass:"el-icon-s-cooperation",staticStyle:{color:"#409eff","margin-left":"-5px"}}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("任务管理")])])],1)],1),t._v(" "),a("el-main",["/home"!=this.$router.currentRoute.path?a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(this.$router.currentRoute.name))])],1):t._e(),t._v(" "),"/home"==this.$router.currentRoute.path||"/"==this.$router.currentRoute.path?a("DashBoard"):t._e(),t._v(" "),a("router-view",{staticClass:"homeRouterView"})],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,c,!1,function(t){a("8uHG")},"data-v-99b0c404",null).exports,p={name:"Node",props:["nodeList"],data:function(){return{nodes:this.nodeList,pageNo:1,pageSize:10,pageTotal:0}},mounted:function(){this.init()},methods:{init:function(){},handlePageChange:function(){},formatDuring:function(t){t=(new Date).getTime()-t;var e=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),l=Math.floor(t%36e5/6e4);return e>0?e+"天"+a+"小时"+l+"分钟":a+"小时"+l+"分钟"}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.nodes,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"nodeName",label:"节点名",width:"130",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hostName",label:"hostName",width:"385"}}),t._v(" "),a("el-table-column",{attrs:{label:"运行时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatDuring(e.row.startTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"isLeader",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.leader?a("el-tag",{attrs:{type:"success"}},[t._v("true")]):a("el-tag",[t._v("false")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"osName",label:"osName",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"osArch",label:"osArch"}})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":t.pageNo,"page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.pageTotal},on:{"current-change":t.handlePageChange}})],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(t){a("wMX3")},"data-v-033c7c86",null).exports,g={name:"Plugins",props:["groupName"],data:function(){return{plugins:[],pageNo:1,pageSize:10,pageTotal:0,dialogFormVisible:!1,form:{groupName:this.groupName,pluginId:"",version:"",sync:!1},pluginInstallList:[],pluginInfoMap:{},rules:{pluginId:[{required:!0,message:"插件ID不能为空",trigger:"blur"}],version:[{required:!0,message:"版本不能为空",trigger:"blur"}]}}},mounted:function(){this.initData(),this.initPlugins()},methods:{clearData:function(){this.form={groupName:this.groupName,pluginId:"",version:"",sync:!1}},initData:function(){var t=this;this.getRequest("mydataharbor/plugin/pageQueryForVue?pageNo=1&pageSize=10000").then(function(e){var a=e.records;t.pluginInfoMap={},t.pluginInstallList=[],a.forEach(function(e){t.pluginInstallList.push(e.pluginId),t.pluginInfoMap[e.pluginId]=null==t.pluginInfoMap[e.pluginId]?[]:t.pluginInfoMap[e.pluginId],t.pluginInfoMap[e.pluginId].push(e.version),e.children.forEach(function(a){t.pluginInfoMap[e.pluginId].push(a.version)})})})},initPlugins:function(){var t=this;this.getRequest("mydataharbor/node/groupList").then(function(e){t.plugins=e.data[t.groupName].installedPlugins})},unInstallPlugin:function(t){var e=this;console.log("uninstall"+t),this.postRequest("/mydataharbor/node/uninstallPlugin?groupName="+this.groupName+"&pluginId="+t).then(function(t){0==t.code&&(e.$message.info("插件卸载成功！"),e.initPlugins())})},submit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;var a="mydataharbor/node/installPlugin?groupName="+t.form.groupName+"&pluginId="+t.form.pluginId+"&version="+t.form.version+"&sync="+t.form.sync;t.postRequest(a).then(function(e){0==e.code?(t.$message.info("插件安装成功！"),t.initPlugins()):t.$message.error(e.msg)}),t.dialogFormVisible=!1,t.clearData()})},cancel:function(){this.dialogFormVisible=!1,this.clearData()},handlePageChange:function(){}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("安装插件")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.plugins,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"300",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginDescription",label:"描述",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginClass",label:"类路径",width:"400"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"requires",label:"requires",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"provider",label:"提供者",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-close"},on:{click:function(a){return t.unInstallPlugin(e.row.pluginId)}}},[t._v("卸载")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":t.pageNo,"page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.pageTotal},on:{"current-change":t.handlePageChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"插件安装",visible:t.dialogFormVisible,width:"25%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left"}},[a("el-form-item",{attrs:{label:"组名","label-width":"65px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"组件ID","label-width":"65px",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择组件ID"},model:{value:t.form.pluginId,callback:function(e){t.$set(t.form,"pluginId",e)},expression:"form.pluginId"}},t._l(t.pluginInstallList,function(t){return a("el-option",{key:t.id,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"版本","label-width":"65px",prop:"version"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择组件版本"},model:{value:t.form.version,callback:function(e){t.$set(t.form,"version",e)},expression:"form.version"}},t._l(t.pluginInfoMap[t.form.pluginId],function(t){return a("el-option",{key:t.id,attrs:{label:t,value:t}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(g,b,!1,function(t){a("CIw6")},"data-v-3ab49f54",null).exports,v=a("mvHQ"),k=a.n(v),_=a("Xxa5"),y=a.n(_),w=a("exGp"),S=a.n(w),I=(a("uGPS"),a("L6Z1")),x=a.n(I),z={props:{value:[String,Number,Object,Array],showBtns:[Boolean],expandedOnStart:{type:Boolean,default:!1},mode:{type:String,default:"tree"},modes:{type:Array,default:function(){return["tree","code","form","text","view"]}},lang:{type:String,default:"en"}},watch:{value:{immediate:!0,handler:function(t){var e=this;return S()(y.a.mark(function a(){return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.internalChange){a.next=5;break}return a.next=3,e.setEditor(t);case 3:e.error=!1,e.expandAll();case 5:case"end":return a.stop()}},a,e)}))()},deep:!0}},data:function(){return{editor:null,error:!1,json:this.value,internalChange:!1,expandedModes:["tree","view","form"],locale:{it:{save:"SALVA"},en:{save:"SAVE"},zh:{save:"保存"}}}},mounted:function(){var t=this,e={mode:this.mode,modes:this.modes,onChange:function(){try{var e=t.editor.get();t.json=e,t.error=!1,t.$emit("json-change",e),t.internalChange=!0,t.$emit("input",e),t.$nextTick(function(){t.internalChange=!1})}catch(e){t.error=!0,t.$emit("has-error",e)}},onModeChange:function(){t.expandAll()}};this.editor=new x.a(this.$el.querySelector(".jsoneditor-vue"),e,this.json)},methods:{expandAll:function(){this.expandedOnStart&&this.expandedModes.includes(this.editor.getMode())&&this.editor.expandAll()},onSave:function(){this.$emit("json-save",this.json)},setEditor:function(t){var e=this;return S()(y.a.mark(function a(){return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.editor&&e.editor.set(t);case 1:case"end":return a.stop()}},a,e)}))()}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"jsoneditor-vue"}),t._v(" "),!1!==t.showBtns?a("div",{staticClass:"jsoneditor-btns"},[a("button",{staticClass:"json-save-btn",attrs:{type:"button",disabled:t.error},on:{click:function(e){return t.onSave()}}},[t._v(t._s(t.locale[t.lang].save))])]):t._e()])},staticRenderFns:[]};var N=a("VU/8")(z,C,!1,function(t){a("NHqR")},"data-v-723cff9b",null).exports,F={name:"Tasks",props:["groupName"],data:function(){return{taskList:[],pluginInstallList:[],clazzList:[],dialogFormVisible:!1,taskDetailVisible:!1,dialogUpdateVisible:!1,dialogStateVisible:!1,form:{groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{parallel:!1,threadNum:1,batchCommit:!1,batchWrite:!1,sleepTime:0},configJson:{}},taskDetailForm:[],detailSettingJsonConfig:{},detailConfigJson:{},taskAssignedInfo:[],taskState:{created:{zh:"创建",color:""},started:{zh:"启动",color:"success"},suspend:{zh:"暂停",color:"info"},continued:{zh:"继续",color:"warning"},over:{zh:"结束",color:"over"}},states:["created","started","suspend","continued","over"],dialogName:"提交任务",updateForm:{enableRebalance:!0,taskId:"",totalNumberOfPipline:0},stateForm:{taskId:"",taskState:""}}},components:{vueJsonEditor:N},mounted:function(){this.initData(),this.getTasksByGroupName()},methods:{clearData:function(){this.form={groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{parallel:!1,threadNum:1,batch:!1},configJson:{}},this.taskDetailForm=[],this.dialogName="提交任务"},initData:function(){var t=this,e=[];this.taskList=[],this.getRequest("mydataharbor/node/groupList").then(function(a){if(0==a.code){e=a.data[t.groupName].tasks;var l=[];t.postRequest("mydataharbor/task/listTask").then(function(a){0==a.code&&(l=a.data,e.forEach(function(e){t.taskList.push(l[e])}))})}})},getTasksByGroupName:function(){var t=this;this.getRequest("/mydataharbor/node/plugin?groupName="+this.groupName).then(function(e){t.pluginInstallList=e.data})},submit:function(){var t=this;this.dialogFormVisible=!1,this.form.configJson=k()(this.form.configJson),this.form.settingJsonConfig=k()(this.form.settingJsonConfig),this.postRequest("mydataharbor/task/submit",this.form).then(function(e){-1==e.code&&t.$message.error(e.msg),0==e.code&&(t.$message.info("任务提交成功！"),t.initData(),t.clearData())})},cancel:function(){this.dialogFormVisible=!1,this.taskDetailVisible=!1,this.dialogUpdateVisible=!1,this.dialogStateVisible=!1,this.clearData()},selectPluginId:function(t){var e=this;this.clazzList=[],this.pluginInstallList.forEach(function(a){a.pluginId==t&&a.dataSinkCreatorInfos.forEach(function(t){e.clazzList.push(t.clazz)})})},taskDetail:function(t){this.taskDetailForm=[],this.taskAssignedInfo=[];var e=JSON.parse(k()(t));this.detailConfigJson=JSON.parse(t.configJson),this.detailSettingJsonConfig=JSON.parse(t.settingJsonConfig);var a=t.taskAssignedInfo.assignedInfoMap;for(var l in a)this.taskAssignedInfo.push(a[l]);console.log(this.taskAssignedInfo),this.taskDetailForm.push(e),console.log(this.taskDetailForm),this.taskDetailVisible=!0},taskUpdate:function(t){this.updateForm.taskId=t.taskId,this.updateForm.totalNumberOfPipline=t.totalNumberOfPipline,this.updateForm.enableRebalance=t.enableRebalance,this.dialogUpdateVisible=!0},updateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/editTask",this.updateForm).then(function(e){0==e.code&&(t.$message.info("任务修改成功！"),t.initData())}),this.dialogUpdateVisible=!1},taskFork:function(t){this.dialogName="Fork任务",this.dialogFormVisible=!0,this.form=JSON.parse(k()(t)),this.form.configJson=JSON.parse(t.configJson),this.form.settingJsonConfig=JSON.parse(t.settingJsonConfig)},taskStates:function(t){this.stateForm.taskId=t.taskId,this.stateForm.taskState=t.taskState,this.dialogStateVisible=!0},updateStateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/manageTaskState?taskId="+this.stateForm.taskId+"&taskState="+this.stateForm.taskState).then(function(e){0==e.code?(t.$message.info("任务状态修改成功！"),t.initData()):t.$message.error(e.msg)}),this.dialogStateVisible=!1}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("提交任务")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.taskList,border:"",width:"100%","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"220",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.taskState[e.row.taskState].color,size:"small"}},[t._v(t._s(t.taskState[e.row.taskState].zh))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mydataharborCreatorClazz",label:"创建器类型",width:"450"}}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"组名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.taskDetail(e.row)}}},[t._v("详情")]),t._v(" "),a("el-button",{staticStyle:{color:"#67C23A"},attrs:{type:"text"},on:{click:function(a){return t.taskUpdate(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{color:"#E6A23C"},attrs:{type:"text"},on:{click:function(a){return t.taskFork(e.row)}}},[t._v("fork")]),t._v(" "),a("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text"},on:{click:function(a){return t.taskStates(e.row)}}},[t._v("状态")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogName,visible:t.dialogFormVisible,width:"42%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small",disabled:""},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组件ID",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择组件ID",size:"small"},on:{change:t.selectPluginId},model:{value:t.form.pluginId,callback:function(e){t.$set(t.form,"pluginId",e)},expression:"form.pluginId"}},t._l(t.pluginInstallList,function(t){return a("el-option",{key:t.id,attrs:{label:t.pluginId,value:t.pluginId}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"管道数"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small"},model:{value:t.form.totalNumberOfPipline,callback:function(e){t.$set(t.form,"totalNumberOfPipline",e)},expression:"form.totalNumberOfPipline"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类路径"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择CreatorClazz",size:"small"},model:{value:t.form.mydataharborCreatorClazz,callback:function(e){t.$set(t.form,"mydataharborCreatorClazz",e)},expression:"form.mydataharborCreatorClazz"}},t._l(t.clazzList,function(t){return a("el-option",{key:t.id,attrs:{label:t,value:t}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"负载均衡"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择是否负载均衡",size:"small"},model:{value:t.form.enableRebalance,callback:function(e){t.$set(t.form,"enableRebalance",e)},expression:"form.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{space:14}},[a("el-alert",{attrs:{title:"无负载均衡，如果节点停机，节点任务不会自动转移！",type:"info","show-icon":""}})],1)],1)],1),t._v(" "),a("p",[t._v("任务设置")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.settingJsonConfig,callback:function(e){t.$set(t.form,"settingJsonConfig",e)},expression:"form.settingJsonConfig"}}),t._v(" "),a("p",[t._v("任务行为")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.configJson,callback:function(e){t.$set(t.form,"configJson",e)},expression:"form.configJson"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务详情",visible:t.taskDetailVisible,width:"42%"},on:{"update:visible":function(e){t.taskDetailVisible=e}}},[a("p",[t._v("基本信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskDetailForm}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("任务分配信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskAssignedInfo}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("管道信息：")]),t._v(" "),t._l(e.row.piplineStates,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])}),t._v(" "),a("el-divider"),t._v(" "),a("p",[t._v("写总计：")]),t._v(" "),t._l(e.row.writeTotal,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])})]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"diverted",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.diverted?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"createException",label:"创建异常","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.createException?a("span",[t._v("无")]):a("span",[t._v(t._s(e.row.createException))])]}}],null,!0)})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"组名",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"180","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"200","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数"}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])})],1),t._v(" "),a("p",[t._v("任务设置")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailSettingJsonConfig,callback:function(e){t.detailSettingJsonConfig=e},expression:"detailSettingJsonConfig"}}),t._v(" "),a("p",[t._v("任务行为")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailConfigJson,callback:function(e){t.detailConfigJson=e},expression:"detailConfigJson"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务修改",visible:t.dialogUpdateVisible,width:"23%"},on:{"update:visible":function(e){t.dialogUpdateVisible=e}}},[a("el-form",{attrs:{model:t.updateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.updateForm.taskId,callback:function(e){t.$set(t.updateForm,"taskId",e)},expression:"updateForm.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"管道数","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:t.updateForm.totalNumberOfPipline,callback:function(e){t.$set(t.updateForm,"totalNumberOfPipline",e)},expression:"updateForm.totalNumberOfPipline"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"负载均衡","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择是否负载均衡"},model:{value:t.updateForm.enableRebalance,callback:function(e){t.$set(t.updateForm,"enableRebalance",e)},expression:"updateForm.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateFormSubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务状态",visible:t.dialogStateVisible,width:"23%"},on:{"update:visible":function(e){t.dialogStateVisible=e}}},[a("el-form",{attrs:{model:t.stateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.stateForm.taskId,callback:function(e){t.$set(t.stateForm,"taskId",e)},expression:"stateForm.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务状态","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择任务状态"},model:{value:t.stateForm.taskState,callback:function(e){t.$set(t.stateForm,"taskState",e)},expression:"stateForm.taskState"}},t._l(t.states,function(t){return a("el-option",{attrs:{id:t.id,label:t,value:t}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateStateFormSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var R={name:"Cluster",components:{Tasks:a("VU/8")(F,D,!1,function(t){a("AG7m")},"data-v-60a4eaef",null).exports,Plugins:h,Node:f},data:function(){return{cluster:{}}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.getRequest("mydataharbor/node/groupList").then(function(e){0==e.code&&(t.cluster=e.data)})}}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{"tab-position":"left"}},t._l(t.cluster,function(e){return a("el-tab-pane",{key:e.id,attrs:{label:e.groupName}},[a("el-tabs",{staticStyle:{"margin-left":"10px"},attrs:{"active-name":"first"}},[a("el-tab-pane",{attrs:{label:"节点",name:"first"}},[a("Node",{attrs:{"node-list":e.nodeInfos}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"插件",name:"second"}},[a("Plugins",{attrs:{"group-name":e.groupName}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"任务",name:"third"}},[a("Tasks",{attrs:{"group-name":e.groupName}})],1)],1)],1)}),1)],1)},staticRenderFns:[]};var E=a("VU/8")(R,J,!1,function(t){a("aoDq")},"data-v-778bc450",null).exports,T={name:"Plugin",data:function(){return{query:{pageNo:1,pageSize:10,pluginId:"",version:"",des:""},tableData:[],pageTotal:0,showFile:!0}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;console.log("loading info……"),this.getRequest("mydataharbor/plugin/pageQueryForVue",this.query).then(function(e){t.tableData=e.records,t.pageTotal=e.total,console.log(e)})},handleSearch:function(){this.initData()},clear:function(){this.initData()},handlePageChange:function(t){this.query.pageNo=t,this.initData()},handleSuccess:function(t,e){console.log("success"),-1==t.code&&(this.$message.error(t.msg),this.showFile=!1)},handleError:function(t,e,a){console.log("error"+t),console.log(e),console.log(a)}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("div",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/mydataharbor/plugin/uploadPlugin","on-success":t.handleSuccess,"on-error":t.handleError,"show-file-list":t.showFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传插件")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jar文件，且不超过500M")])],1)],1),t._v(" "),a("div",[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"插件id",size:"small",clearable:""},on:{clear:t.clear},model:{value:t.query.pluginId,callback:function(e){t.$set(t.query,"pluginId",e)},expression:"query.pluginId"}}),t._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"插件版本",size:"small",clearable:""},on:{clear:t.clear},model:{value:t.query.version,callback:function(e){t.$set(t.query,"version",e)},expression:"query.version"}}),t._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"插件描述",size:"small",clearable:""},on:{clear:t.clear},model:{value:t.query.des,callback:function(e){t.$set(t.query,"des",e)},expression:"query.des"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.handleSearch}},[t._v("搜索")])],1)]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"65",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件id",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"文件名",width:"440"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginDescription",label:"描述",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"144",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FormatDate")(e.row.createTime,"yyyy-MM-dd HH:mm")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"144",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FormatDate")(e.row.updateTime,"yyyy-MM-dd HH:mm")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{href:"/mydataharbor/plugin/downloadPlugin?pluginId="+e.row.pluginId+"&version="+e.row.version,type:"primary",icon:"el-icon-download",target:"_blank"}},[t._v("下载")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":t.query.pageNo,"page-sizes":[5,10,20,50],"page-size":t.query.pageSize,total:t.pageTotal},on:{"current-change":t.handlePageChange}})],1)],1)])},staticRenderFns:[]};var A=a("VU/8")(T,P,!1,function(t){a("B9mo")},"data-v-72b01c86",null).exports,q={name:"Tasks",props:["groupName"],data:function(){return{taskList:[],pluginInstallList:[],clazzList:[],dialogFormVisible:!1,taskDetailVisible:!1,dialogUpdateVisible:!1,dialogStateVisible:!1,form:{groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{parallel:!1,threadNum:1,batch:!1,sleepTime:0},configJson:{}},taskDetailForm:[],detailSettingJsonConfig:{},detailConfigJson:{},taskAssignedInfo:[],taskState:{created:{zh:"创建",color:""},started:{zh:"启动",color:"success"},suspend:{zh:"暂停",color:"info"},continued:{zh:"继续",color:"warning"},over:{zh:"结束",color:"over"}},states:["created","started","suspend","continued","over"],dialogName:"提交任务",updateForm:{enableRebalance:!0,taskId:"",totalNumberOfPipline:0},stateForm:{taskId:"",taskState:""}}},components:{vueJsonEditor:N},mounted:function(){this.initData(),this.getTasksByGroupName()},methods:{clearData:function(){this.form={groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipline:1,enableRebalance:!0,settingJsonConfig:{parallel:!1,threadNum:1,batch:!1},configJson:{}},this.taskDetailForm=[],this.dialogName="提交任务"},initData:function(){var t=this;this.taskList=[],this.postRequest("mydataharbor/task/listTask").then(function(e){if(0==e.code){var a=e.data;for(var l in a)t.taskList.push(a[l])}})},getTasksByGroupName:function(){var t=this;this.getRequest("/mydataharbor/node/plugin?groupName="+this.groupName).then(function(e){t.pluginInstallList=e.data})},submit:function(){var t=this;this.dialogFormVisible=!1,this.form.configJson=k()(this.form.configJson),this.form.settingJsonConfig=k()(this.form.settingJsonConfig),this.postRequest("mydataharbor/task/submit",this.form).then(function(e){-1==e.code&&t.$message.error(e.msg),0==e.code&&(t.$message.info("任务fork成功！"),t.initData(),t.clearData())})},cancel:function(){this.dialogFormVisible=!1,this.taskDetailVisible=!1,this.dialogUpdateVisible=!1,this.dialogStateVisible=!1,this.clearData()},selectPluginId:function(t){var e=this;this.clazzList=[],this.pluginInstallList.forEach(function(a){a.pluginId==t&&a.dataSinkCreatorInfos.forEach(function(t){e.clazzList.push(t.clazz)})})},taskDetail:function(t){this.taskDetailForm=[],this.taskAssignedInfo=[];var e=JSON.parse(k()(t));this.detailConfigJson=JSON.parse(t.configJson),this.detailSettingJsonConfig=JSON.parse(t.settingJsonConfig);var a=t.taskAssignedInfo.assignedInfoMap;for(var l in a)this.taskAssignedInfo.push(a[l]);console.log(this.taskAssignedInfo),this.taskDetailForm.push(e),console.log(this.taskDetailForm),this.taskDetailVisible=!0},taskUpdate:function(t){this.updateForm.taskId=t.taskId,this.updateForm.totalNumberOfPipline=t.totalNumberOfPipline,this.updateForm.enableRebalance=t.enableRebalance,this.dialogUpdateVisible=!0},updateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/editTask",this.updateForm).then(function(e){0==e.code&&(t.$message.info("任务修改成功！"),t.initData())}),this.dialogUpdateVisible=!1},taskFork:function(t){this.dialogName="Fork任务",this.dialogFormVisible=!0,this.form=JSON.parse(k()(t)),this.form.configJson=JSON.parse(t.configJson),this.form.settingJsonConfig=JSON.parse(t.settingJsonConfig)},taskStates:function(t){this.stateForm.taskId=t.taskId,this.stateForm.taskState=t.taskState,this.dialogStateVisible=!0},updateStateFormSubmit:function(){var t=this;this.postRequest("mydataharbor/task/manageTaskState?taskId="+this.stateForm.taskId+"&taskState="+this.stateForm.taskState).then(function(e){0==e.code?(t.$message.info("任务状态修改成功！"),t.initData()):t.$message.error(e.msg)}),this.dialogStateVisible=!1}}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.taskList,border:"",width:"100%","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"220",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.taskState[e.row.taskState].color,size:"small"}},[t._v(t._s(t.taskState[e.row.taskState].zh))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mydataharborCreatorClazz",label:"创建器类型",width:"300","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"组名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.taskDetail(e.row)}}},[t._v("详情")]),t._v(" "),a("el-button",{staticStyle:{color:"#67C23A"},attrs:{type:"text"},on:{click:function(a){return t.taskUpdate(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{color:"#E6A23C"},attrs:{type:"text"},on:{click:function(a){return t.taskFork(e.row)}}},[t._v("fork")]),t._v(" "),a("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text"},on:{click:function(a){return t.taskStates(e.row)}}},[t._v("状态")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogName,visible:t.dialogFormVisible,width:"42%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small",disabled:""},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组件ID",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择组件ID",size:"small"},on:{change:t.selectPluginId},model:{value:t.form.pluginId,callback:function(e){t.$set(t.form,"pluginId",e)},expression:"form.pluginId"}},t._l(t.pluginInstallList,function(t){return a("el-option",{key:t.id,attrs:{label:t.pluginId,value:t.pluginId}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"管道数"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small"},model:{value:t.form.totalNumberOfPipline,callback:function(e){t.$set(t.form,"totalNumberOfPipline",e)},expression:"form.totalNumberOfPipline"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类路径"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择CreatorClazz",size:"small"},model:{value:t.form.mydataharborCreatorClazz,callback:function(e){t.$set(t.form,"mydataharborCreatorClazz",e)},expression:"form.mydataharborCreatorClazz"}},t._l(t.clazzList,function(t){return a("el-option",{key:t.id,attrs:{label:t,value:t}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"负载均衡"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择是否负载均衡",size:"small"},model:{value:t.form.enableRebalance,callback:function(e){t.$set(t.form,"enableRebalance",e)},expression:"form.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{space:14}},[a("el-alert",{attrs:{title:"无负载均衡，如果节点停机，节点任务不会自动转移！",type:"info","show-icon":""}})],1)],1)],1),t._v(" "),a("p",[t._v("任务设置")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.settingJsonConfig,callback:function(e){t.$set(t.form,"settingJsonConfig",e)},expression:"form.settingJsonConfig"}}),t._v(" "),a("p",[t._v("任务行为")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.form.configJson,callback:function(e){t.$set(t.form,"configJson",e)},expression:"form.configJson"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务详情",visible:t.taskDetailVisible,width:"42%"},on:{"update:visible":function(e){t.taskDetailVisible=e}}},[a("p",[t._v("基本信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskDetailForm}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("任务分配信息：")]),t._v(" "),a("el-table",{attrs:{data:t.taskAssignedInfo}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("管道信息：")]),t._v(" "),t._l(e.row.piplineStates,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])}),t._v(" "),a("el-divider"),t._v(" "),a("p",[t._v("写总计：")]),t._v(" "),t._l(e.row.writeTotal,function(e,l){return a("p",[t._v(t._s(l)+"："+t._s(e))])})]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"diverted",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.diverted?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"createException",label:"创建异常","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.createException?a("span",[t._v("无")]):a("span",[t._v(t._s(e.row.createException))])]}}],null,!0)})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"组名",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"180","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",width:"200","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipline",label:"管道数"}}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[t._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("false")])]}}])})],1),t._v(" "),a("p",[t._v("任务设置")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailSettingJsonConfig,callback:function(e){t.detailSettingJsonConfig=e},expression:"detailSettingJsonConfig"}}),t._v(" "),a("p",[t._v("任务行为")]),t._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:t.detailConfigJson,callback:function(e){t.detailConfigJson=e},expression:"detailConfigJson"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务修改",visible:t.dialogUpdateVisible,width:"23%"},on:{"update:visible":function(e){t.dialogUpdateVisible=e}}},[a("el-form",{attrs:{model:t.updateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.updateForm.taskId,callback:function(e){t.$set(t.updateForm,"taskId",e)},expression:"updateForm.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"管道数","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:t.updateForm.totalNumberOfPipline,callback:function(e){t.$set(t.updateForm,"totalNumberOfPipline",e)},expression:"updateForm.totalNumberOfPipline"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"负载均衡","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择是否负载均衡"},model:{value:t.updateForm.enableRebalance,callback:function(e){t.$set(t.updateForm,"enableRebalance",e)},expression:"updateForm.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),t._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateFormSubmit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务状态",visible:t.dialogStateVisible,width:"23%"},on:{"update:visible":function(e){t.dialogStateVisible=e}}},[a("el-form",{attrs:{model:t.stateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:t.stateForm.taskId,callback:function(e){t.$set(t.stateForm,"taskId",e)},expression:"stateForm.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务状态","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择任务状态"},model:{value:t.stateForm.taskState,callback:function(e){t.$set(t.stateForm,"taskState",e)},expression:"stateForm.taskState"}},t._l(t.states,function(t){return a("el-option",{attrs:{id:t.id,label:t,value:t}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateStateFormSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")(q,V,!1,function(t){a("mqaX")},"data-v-0382fc3a",null).exports,L=a("mtWM"),B=a.n(L),Q=a("zL8q"),M=a.n(Q);B.a.interceptors.response.use(function(t){if(!t.status||200!=t.status||500!=t.data.status)return t.data;Q.Message.error({message:t.data.msg})},function(t){504==t.response.status||404==t.response.status?Q.Message.error({message:"服务端宕机了！"}):403==t.response.status?Q.Message.error({message:"权限不足，请联系管理员！"}):401==t.response.status?(Q.Message.error({message:"尚未登录，请登录！"}),U.replace("/")):t.response.data.msg?Q.Message.error({message:t.response.data.msg}):Q.Message.error({message:"未知错误！"})});l.default.prototype.postRequest=function(t,e){return B()({method:"post",url:""+t,data:e})},l.default.prototype.getRequest=function(t,e){return B()({method:"get",url:""+t,params:e})},l.default.prototype.postKeyValueRequest=function(t,e){return B()({method:"post",url:""+t,data:e,transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return console.log(e),e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},l.default.prototype.putRequest=function(t,e){return B()({method:"put",url:""+t,data:e})},l.default.prototype.deleteRequest=function(t,e){return B()({method:"delete",url:""+t,params:e})},l.default.use(i.a),l.default.config.productionTip=!1;var U=new i.a({routes:[{path:"/",name:"首页",component:d,hidden:!0},{path:"/home",name:"home",component:d,hidden:!0,children:[{path:"/cluster",name:"集群管理",component:E,hidden:!0},{path:"/plugin",name:"插件管理",component:A,hidden:!0},{path:"/task",name:"任务管理",component:O,hidden:!0}]}]});a("tvR6");l.default.config.productionTip=!1,l.default.use(M.a),l.default.filter("FormatDate",function(t,e){return function(t,e){t=new Date(t),void 0===e&&(e="yyyy-MM-dd HH:mm:ss"),/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var l in a)if(new RegExp("("+l+")").test(e)){var o=a[l]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:("00"+o).substr(o.length))}return e}(t,e)}),new l.default({el:"#app",router:U,components:{App:s},template:"<App/>"})},NHqR:function(t,e){},aoDq:function(t,e){},"e+L+":function(t,e){},mqaX:function(t,e){},oHEE:function(t,e){},tvR6:function(t,e){},uGPS:function(t,e){},wMX3:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fd6dbd456cb9aa698467.js.map